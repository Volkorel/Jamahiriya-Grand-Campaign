oe_get_appropriate_ancient_people = {
	random_list = {
		999 = {
			trigger = {
				OR = {
					root.culture = {
						OR = {
							culture_overlaps_geographical_region = world_steppe
							culture_overlaps_geographical_region = world_steppe_tartaria
						}
					}
					culture = { has_cultural_pillar = heritage_turkic }
					culture = { has_cultural_pillar = heritage_mongolic }
				}
				NOT = { culture = culture:xiongnu }
			}
			set_variable = { name = original_region	value = geographical_region:world_steppe_east
				years = 1
			}
			culture:xiongnu = { save_scope_as = ancient_culture }
		}
		999 = {
			trigger = {
				OR = {
					root.culture = {
						OR = {
							culture_overlaps_geographical_region = world_steppe
							culture_overlaps_geographical_region = world_steppe_tartaria
						}
					}
					culture = culture:siber
					culture = culture:tuyuhun
					culture = { has_cultural_pillar = heritage_mongolic }
				}
				NOT = { culture = culture:xianbei }
			}
			set_variable = { name = original_region	value = geographical_region:world_steppe_tartaria
				years = 1
			}
			culture:xianbei = { save_scope_as = ancient_culture }
		}
		999 = {
			trigger = {
				OR = {
					root.culture = {
						culture_overlaps_geographical_region = world_steppe_east
					}
					culture = culture:qiang
				}
				NOT = { culture = culture:di }
			}
			set_variable = { name = original_region	value = geographical_region:world_steppe_east
				years = 1
			}
			culture:di = { save_scope_as = ancient_culture }
		}
		999 = {
			trigger = {
				OR = {
					root.culture = {
						OR = {
							culture_overlaps_geographical_region = world_steppe_tunguse
							culture_overlaps_geographical_region = world_asia_china_liao
							culture_overlaps_geographical_region = world_asia_korea 
						}
					}
					culture = culture:baekje
					culture = culture:goguryeo
				}
				NOT = { culture = culture:buyeo }
			}
			set_variable = { name = original_region	value = geographical_region:world_steppe_tartaria
				years = 1
			}
			culture:buyeo = { save_scope_as = ancient_culture }
		}
		999 = {
			trigger = {
				OR = {
					root.culture = {
						culture_overlaps_geographical_region = world_asia_korea
					}
					culture = { has_cultural_pillar = heritage_goryeo }
				}
				NOT = { culture = culture:senhan }
			}
			set_variable = { name = original_region	value = geographical_region:world_asia_korea
				years = 1
			}
			culture:senhan = { save_scope_as = ancient_culture }
		}
		999 = {
			trigger = {
				OR = {
					root.culture = {
						OR = {
							culture_overlaps_geographical_region = world_asia_southeast_angkor
							culture_overlaps_geographical_region = world_asia_southeast_madjapahit
						}
					}
					culture = culture:mon
					culture = culture:java
				}
				NOT = { culture = culture:phnom }
			}
			set_variable = { name = original_region	value = geographical_region:world_asia_southeast
				years = 1
			}
			culture:phnom = { save_scope_as = ancient_culture }
		}
		999 = {
			trigger = {
				OR = {
					root.culture = {
						culture_overlaps_geographical_region = world_asia_china_yanzhao
					}
					OR = {
						has_title = title:k_zhao
						has_title = title:k_zhou
						has_title = title:k_liao
					}
				}
				religion = religion:confucianism_religion
				NOT = { culture = culture:shang }
			}
			set_variable = { name = original_region	value = geographical_region:world_asia_china_yanzhao
				years = 1
			}
			culture:shang = { save_scope_as = ancient_culture }
		}
		999 = {
			trigger = {
				OR = {
					root.culture = {
						culture_overlaps_geographical_region = world_asia_china_shu
					}
					OR = {
						has_title = title:k_nanzhong
						has_title = title:k_shu
						has_title = title:e_shu
					}
				}
				religion = religion:confucianism_religion
				NOT = { culture = culture:shang }
			}
			set_variable = { name = original_region	value = geographical_region:world_asia_china_shu
				years = 1
			}
			culture:shu = { save_scope_as = ancient_culture }
		}
		1 = { # Roman (fallback, placeholder)
			set_variable = { name = original_region	value = geographical_region:custom_roman_full_borders
				years = 1
			}
			culture:roman = { save_scope_as = ancient_culture }
		}
	}
}



oe_get_appropriate_ancestral_dynasty = {
	random_list = {
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:peiguo_han_dyn }
				current_year > 263
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1800859
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:sishui_cao_dyn }
				current_year > 265
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:sishui_cao_0019
			}
		}
		50 = {
			trigger = {
				NOT = { house = house:house_zhuojun_liu }
				current_year > 265
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1800056
			}
		}
		99 = {
			trigger = {
				NOT = { house = house:house_fuchun_sun }
				current_year > 280
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1407867
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:henei_sima_dyn }
				current_year > 420
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:henei_sima_018
			}
		}
		50 = {
			trigger = {
				NOT = { house = house:house_pengcheng_suiyu_liu }
				current_year > 479
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1800915
			}
		}
		50 = {
			trigger = {
				NOT = { house = house:house_nanliang_xiao }
				current_year > 502
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1402410
			}
		}
		50 = {
			trigger = {
				NOT = { dynasty = dynasty:lanling_xiao_dyn }
				current_year > 557
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1402537
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:yingchuan_chen_dyn }
				current_year > 589
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1406821
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:1029300 }
				current_year > 556
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1415014
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:hongnong_yang_dyn }
				current_year > 618
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:247725
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:longxi_li_dyn }
				current_year > 907
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:longxi_li_0646
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:taiyuan_wu_dyn }
				current_year > 705
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:217704
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:1000048291 }
				current_year > 960
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:1401283
			}
		}
		99 = {
			trigger = {
				NOT = { dynasty = dynasty:zhuojun_zhao_dyn }
				current_year > 1279
			}
			set_variable = { name = ancestral_dynasty_founder	value = character:217721
			}
		}
	}

}

oe_get_appropriate_loyalty_warrior = {
	random_list = {
		999 = { 
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			character:gaizhou_guan_100 = { save_scope_as = legend_character } 
		}
		999 = { 
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			character:zhuozhou_zhang_100 = { save_scope_as = legend_character } 
		}
		999 = { 
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			character:changshan_zhao100 = { save_scope_as = legend_character } 
		}
		999 = { 
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			character:fufeng_ma_051 = { save_scope_as = legend_character } 
		}
		999 = { 
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			character:jiuyuan_lv_100 = { save_scope_as = legend_character } 
		}
		999 = { 
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			character:langya_zhuge_200 = { save_scope_as = legend_character } 
		}
		999 = { 
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			character:gor_Yeon_0003 = { save_scope_as = legend_character } 
		}
	}
}
oe_get_appropriate_loyalty_warrior_flag = {
	random_list = {
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:xiangyu }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:lijing }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:mayuan }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:weiqing }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:huoqubing }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:liguang }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:banchao }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:zhouchu }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:huanwen }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_china } }
			set_variable = { name = loyalty_warrior	value = flag:libai }	
		}
		10 = {
			trigger = { culture = { culture_overlaps_geographical_region = world_asia_viet } }
			set_variable = { name = loyalty_warrior	value = flag:TrungVuong }	
		}
	}
}

oe_select_creature_effect = {
	random_list = {
		999 = {
			select_local_animal_effect = { TYPE = big }
		}
		999 = {
			select_local_animal_effect = { TYPE = prowling }
		}
		100 = { # Unicorn
			trigger = {
				has_trait = lunatic
			}
			set_variable = { name = animal_type	value = flag:unicorn
				years = 3
			}
		}
		500 = { # Dragon
			trigger = {
				OR = {
					has_trait = lunatic
					has_title = title:e_celestia
				}
			}
			set_variable = { name = animal_type	value = flag:dragon
				years = 3
			}
		}
		100 = {
			set_up_regional_mythical_creature_effect = yes
			set_variable = { name = animal_type	value = var:regional_mythical_creature_trinket
				years = 3
			}
		}
	}
}

select_auspicious_effect = {
	random_list = {
		10 = {	set_variable = { name = auspicious	value = auspicious_giant_star	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_colorful_clouds	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_sweet_rain	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_yellow_dragon	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_qilin	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_pheonix	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_turtle	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_white_tiger	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_white_wolf	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_white_deer	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_white_fox	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_red_rabbit	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_black_eagle	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_red_geese	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_plump_rice	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_branches_twined	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_five_stars_in_line	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_pearl_in_sea	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_river_map	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_horse_in_lake	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_Rejuvenation	}
		}
		10 = {	set_variable = { name = auspicious	value = auspicious_stars	}
		}
	}
}



#蓬莱 方丈 瀛洲 桃花源 北溟 南溟 华胥 青丘 
get_appropriate_exotic_location = {
	random_list = {
		999 = { #
			trigger = {
				OR = {
					religion = { is_in_family = rf_sino }
					culture = { has_cultural_pillar = heritage_chinese }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:penglai
			}
		}
		999 = { #
			trigger = {
				OR = {
					religion = { is_in_family = rf_sino }
					culture = { has_cultural_pillar = heritage_chinese }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:taohuayuan
			}
		}
		999 = { #
			trigger = {
				OR = {
					religion = { is_in_family = rf_sino }
					culture = { has_cultural_pillar = heritage_chinese }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:beiming
			}
		}
		999 = { #
			trigger = {
				OR = {
					religion = { is_in_family = rf_sino }
					culture = { has_cultural_pillar = heritage_chinese }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:qingqiu
			}
		}	
		999 = { # Atlantis, must care about Greek stuff
			trigger = {
				OR = {
					religion = { is_in_family = rf_abrahamic }
					religion = religion:hellenism_religion
					culture = { has_cultural_pillar = heritage_byzantine }
					culture = { has_cultural_pillar = heritage_ancient_greek }
					culture = { has_cultural_pillar = heritage_latin }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:atlantis
			}
		}
		999 = { # Atlantis, must care about Greek stuff
			trigger = {
				OR = {
					religion = { is_in_family = rf_abrahamic }
					religion = religion:hellenism_religion
					culture = { has_cultural_pillar = heritage_byzantine }
					culture = { has_cultural_pillar = heritage_ancient_greek }
					culture = { has_cultural_pillar = heritage_latin }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:atlantis
			}
		}
		999 = { # Olympus, must care about Greek stuff
			trigger = {
				OR = {
					religion = { is_in_family = rf_abrahamic }
					religion = religion:hellenism_religion
					culture = { has_cultural_pillar = heritage_byzantine }
					culture = { has_cultural_pillar = heritage_ancient_greek }
					culture = { has_cultural_pillar = heritage_latin }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:olympus
			}
		}
		999 = { # India, must be faraway
			trigger = {
				NOT = {
					any_character_to_title_neighboring_and_across_water_county = {
						title_province = { geographical_region = world_india }
					}
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:hindustan
			}
		}
		999 = { # Vinland, must be into vikings and adventures and all that
			trigger = {
				OR = {
					religion = religion:germanic_religion
					culture = { has_cultural_pillar = heritage_north_germanic }
					culture = { has_innovation = innovation_varangian_adventurers }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:vinland
			}
		}
		999 = { # Sunset invasion memes
			trigger = {
				OR = {
					religion = religion:germanic_religion
					culture = { has_cultural_pillar = heritage_north_germanic }
					culture = { has_innovation = innovation_varangian_adventurers }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:sunset_empire
			}
		}
		999 = { # Kingdom of Prester John, must be a Christian who doesn't know about Copts
			trigger = {
				religion = religion:christianity_religion
				NOT = {
					any_character_to_title_neighboring_and_across_water_county = {
						holder = { faith = faith:coptic }
					}
				}
				NOT = { # Prester John isn't exciting if Egypt is Christian
					title:k_egypt = {
						holder ?= { religion = religion:christianity_religion }
					}
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:prester_john_kingdom
			}
		}
		999 = { # Albion, Christians in Jerusalem were way way into Arthurian myth
			trigger = {
				religion = religion:christianity_religion
				capital_county = {
					title_province = { geographical_region = world_middle_east }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:albion
			}
		}
		999 = { # Himavanta, legendary forest in the himalayas
			trigger = {
				OR = {
					capital_county = {
						title_province = {
							OR = {
								geographical_region = world_india
								geographical_region = world_tibet
								geographical_region = world_burma
							}
						}
					}
					culture = { culture_overlaps_geographical_region = world_india }
					culture = { culture_overlaps_geographical_region = world_tibet }
					culture = { culture_overlaps_geographical_region = world_burma }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:himavanta
			}
		}
		999 = { # Mahishmati, lost city
			trigger = {
				OR = {
					capital_county = {
						title_province = { geographical_region = world_india }
					}
					culture = { culture_overlaps_geographical_region = world_india }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:mahishmati
			}
		}
		999 = { # Kumari Kandam, lost continent
			trigger = {
				culture = {
					has_cultural_pillar = heritage_dravidian
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:kumari_kandam
			}
		}
		999 = { # Beyul, hidden valleys
			trigger = {
				OR = {
					capital_county.title_province = { geographical_region = world_tibet }
					culture = { culture_overlaps_geographical_region = world_tibet }
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:beyul
			}
		}
		999 = { # Bald Mountain, slavic witchy mountain
			trigger = {
				OR = {
					culture_has_slavic_heritage_pillar_trigger = yes
					religion = religion:slavic_religion
				}
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:bald_mountain
			}
		}
		999 = { # Irum, lost city in the Quran
			trigger = {
				religion = religion:islam_religion
			}
			save_scope_value_as = {
				name = exotic_location
				value = flag:irum
			}
		}
		1 = { # China (fallback)
			save_scope_value_as = {
				name = exotic_location
				value = flag:china
			}
		}
	}
}

mark_historical_legend_as_done = {
	if = {
		# Dynastic legacy
		limit = {
			legend_property:founder ?= legend_owner.house.house_founder
			legend_property:dynasty ?= legend_owner.dynasty
			legend_property:title ?= legend_owner.primary_title
		}
		legend_owner.dynasty = {
			set_variable = { name = dynasty_legend_used	value = yes
			}
		}
	}
	if = {
		# Arthur
		limit = {
			legend_property:ancestor ?= character:159835
			legend_property:title ?= title:k_england
		}
		set_global_variable = {
			name = king_arthur_legend
			value = yes
		}
	}
	else_if = {
		# Carolingian
		limit = {
			legend_property:ancestor ?= character:6392
			legend_property:title ?= title:e_france
		}
		set_global_variable = {
			name = carolingian_legend
			value = yes
		}
	}
	else_if = {
		# the_wheelwright
		limit = {
			legend_property:ancestor ?= character:82233
		}
		set_global_variable = {
			name = the_wheelwright_legend
			value = yes
		}
	}
	else_if = {
		# cadell
		limit = {
			legend_property:ancestor ?= character:159058
		}
		set_global_variable = {
			name = cadell_legend
			value = yes
		}
	}
	else_if = {
		# sons_of_rurik
		limit = {
			legend_property:ancestor ?= character:40605
		}
		set_global_variable = {
			name = sons_of_rurik_legend
			value = yes
		}
	}
	else_if = {
		# el_cid
		limit = {
			legend_property:ancestor ?= character:107590
		}
		set_global_variable = {
			name = el_cid_legend
			value = yes
		}
	}
	else_if = {
		# peasant_emperor
		limit = {
			legend_property:ancestor ?= character:1700
		}
		set_global_variable = {
			name = peasant_emperor_legend
			value = yes
		}
	}
	else_if = {
		# premysl
		limit = {
			legend_property:ancestor ?= character:168345
		}
		set_global_variable = {
			name = premysl_legend
			value = yes
		}
	}
	else_if = {
		# borjigin
		limit = {
			legend_property:ancestor ?= character:303250
		}
		set_global_variable = {
			name = borjigin_legend
			value = yes
		}
	}
	else_if = {
		# the_red_hand
		limit = {
			legend_property:ancestor ?= character:7255
		}
		set_global_variable = {
			name = the_red_hand_legend
			value = yes
		}
	}
	else_if = {
		# yazdagird_iii
		limit = {
			legend_property:ancestor ?= character:180637
		}
		set_global_variable = {
			name = yazdagird_iii_legend
			value = yes
		}
	}
	else_if = {
		# bahram_gur
		limit = {
			legend_property:ancestor ?= character:180645
		}
		set_global_variable = {
			name = bahram_gur_legend
			value = yes
		}
	}
	else_if = {
		# saman_khudah
		limit = {
			legend_property:ancestor ?= character:188637
		}
		set_global_variable = {
			name = saman_khudah_legend
			value = yes
		}
	}
	else_if = {
		# saman_khudah
		limit = {
			legend_property:ancestor ?= character:163109
		}
		set_global_variable = {
			name = ragnarr_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:vercingetorix
		}
		set_global_variable = {
			name = vercingetorix_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:afrasiyab
		}
		set_global_variable = {
			name = afrasiyab_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:hebrew
			legend_property:title ?= title:k_georgia
			legend_property:original_region ?= geographical_region:world_middle_east_jerusalem
		}
		set_global_variable = {
			name = sons_of_david_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:gothic
			legend_property:title ?= title:e_spain
			legend_property:original_region ?= geographical_region:world_steppe_west
		}
		set_global_variable = {
			name = gothic_kings_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:trojan
			legend_property:title ?= title:e_britannia
			legend_property:original_region ?= geographical_region:troy_region
		}
		set_global_variable = {
			name = new_troy_london_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:trojan
			legend_property:title ?= title:c_cornwall
			legend_property:original_region ?= geographical_region:troy_region
		}
		set_global_variable = {
			name = corineus_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:ancient_egyptian
			legend_property:title ?= title:k_scotland
			legend_property:original_region ?= geographical_region:ghw_region_egypt_et_al
		}
		set_global_variable = {
			name = scota_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:hebrew
			legend_property:title ?= title:e_abyssinia
			legend_property:original_region ?= geographical_region:ghw_region_jerusalem
		}
		set_global_variable = {
			name = menelik_i_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:hebrew
			legend_property:title ?= title:e_abyssinia
			legend_property:original_region ?= geographical_region:israel_region
		}
		set_global_variable = {
			name = kings_of_semien_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:roman
			legend_property:original_region ?= geographical_region:custom_roman_full_borders
		}
		set_global_variable = {
			name = roman_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:hunnic
			legend_property:title ?= title:e_caspian-pontic_steppe
			legend_property:original_region ?= geographical_region:world_steppe_west
		}
		set_global_variable = {
			name = hunnic_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:7627
		}
		set_global_variable = {
			name = alfred_of_wessex_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:168130
		}
		set_global_variable = {
			name = william_gellones_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:99
		}
		set_global_variable = {
			name = edward_the_martyr_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:noah
		}
		set_global_variable = {
			name = sceafa_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:shibi_chakravarti
		}
		set_global_variable = {
			name = shibi_chakravarti_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:beast ?= flag:naga
		}
		set_global_variable = {
			name = naga_descent_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:beast ?= flag:dragon
		}
		set_global_variable = {
			name = pyusawhti_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:god ?= flag:germanic_high_god_name
			legend_property:title ?= title:k_norway
		}
		set_global_variable = {
			name = hieros_gamos_skirnismal_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:god ?= flag:hinduism_high_god_name
			legend_property:title ?= title:e_deccan
		}
		set_global_variable = {
			name = descendants_of_brahman_legend
			value = yes
		}
	}
	oe_mark_historical_legend_as_done = yes
}

oe_mark_historical_legend_as_done = {
	if = {
		limit = {
			legend_property:ancestor_flag ?= flag:yellow_emperor
		}
		set_global_variable = {
			name = yellow_emperor_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:yandi
		}
		set_global_variable = {
			name = yandi_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:chiyou
		}
		set_global_variable = {
			name = chiyou_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:xia_emperor
		}
		set_global_variable = {
			name = xia_emperor_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:lady_sea
		}
		set_global_variable = {
			name = lady_sea_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:lac_long
		}
		set_global_variable = {
			name = lac_long_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:dankun
		}
		set_global_variable = {
			name = dankun_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:ashina
		}
		set_global_variable = {
			name = ashina_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_owner = { exists = var:ancestral_dynasty_founder }
			legend_property:ancestor ?= root.var:ancestral_dynasty_founder
		}
		legend_owner.house = {
			set_variable = { name = ancestral_dynasty_finished #通用前朝传说	
				value = ancestral_dynasty_founder
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:1800859
		}
		legend_owner.dynasty = {
			set_variable = { name = liubang_legend	value = yes
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:longxi_li_0646
		}
		legend_owner.dynasty = {
			set_variable = { name = lishimin_legend	value = yes
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:sishui_cao_0019
		}
		legend_owner.dynasty = {
			set_variable = { name = caocao_legend	value = yes
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:1800056
		}
		legend_owner.dynasty = {
			set_variable = { name = liubei_legend	value = yes
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:1407867
		}
		legend_owner.dynasty = {
			set_variable = { name = sunquan_legend	value = yes
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:1406786
		}
		legend_owner.dynasty = {
			set_variable = { name = taiqiuzhang_legend	value = yes
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:188783
		}
		legend_owner.dynasty = {
			set_variable = { name = Qutlugh_legend	value = yes
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:gor_go_0023
		}
		legend_owner.dynasty = {
			set_variable = { name = Gwanggaeto_legend	value = yes
			}
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:gaizhou_guan_100
		}
		set_global_variable = {
			name = guanyu_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:zhuozhou_zhang_100
		}
		set_global_variable = {
			name = zhangfei_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:changshan_zhao100
		}
		set_global_variable = {
			name = zhaoyun_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:fufeng_ma_051
		}
		set_global_variable = {
			name = machao_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:jiuyuan_lv_100
		}
		set_global_variable = {
			name = lvbu_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:langya_zhuge_200
		}
		set_global_variable = {
			name = zhugeliang_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:dunhuang_zhang_004
		}
		set_global_variable = {
			name = dunhuang_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:1800699
		}
		set_global_variable = {
			name = yangye_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:tangyin_yue_014
		}
		set_global_variable = {
			name = yuefei_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:gor_Yeon_0003
		}
		set_global_variable = {
			name = Gaesomun_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:10110402
		}
		set_global_variable = {
			name = Masakado_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor ?= character:luozhou_chen_002
		}
		set_global_variable = {
			name = xuanzang_legend
			value = yes
		}
	}

	#
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:laozi_legend
		}
		set_global_variable = {
			name = laozi_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:ancestor_flag ?= flag:tianshi_legend
		}
		set_global_variable = {
			name = tianshi_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:xiongnu
			legend_property:title ?= title:e_mongolia
			#legend_property:original_region ?= geographical_region:world_steppe_east
		}
		set_global_variable = {
			name = xiongnu_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:xianbei
			legend_property:title ?= title:e_mongolia
			#legend_property:original_region ?= geographical_region:world_steppe_tartaria
		}
		set_global_variable = {
			name = xianbei_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:di
			legend_property:title ?= title:e_celestia
			#legend_property:original_region ?= geographical_region:world_steppe_east
		}
		set_global_variable = {
			name = di_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:buyeo
			legend_property:title ?= title:e_goguryeo
			#legend_property:original_region ?= geographical_region:world_steppe_tartaria
		}
		set_global_variable = {
			name = buyeo_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:senhan
			legend_property:title ?= title:k_goryeo
			#legend_property:original_region ?= geographical_region:world_asia_korea
		}
		set_global_variable = {
			name = senhan_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:phnom
			legend_property:title ?= title:e_suvarnabhumi
			#legend_property:original_region ?= geographical_region:world_asia_southeast
		}
		set_global_variable = {
			name = phnom_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:shang
			legend_property:title ?= title:e_celestia
			#legend_property:original_region ?= geographical_region:world_asia_china_centre
		}
		set_global_variable = {
			name = shang_heritage_legend
			value = yes
		}
	}
	else_if = {
		limit = {
			legend_property:culture ?= culture:shu
			legend_property:title ?= title:k_shu
			#legend_property:original_region ?= geographical_region:world_asia_china_shu
		}
		set_global_variable = {
			name = shu_heritage_legend
			value = yes
		}
	}
}


#root = owner
legend_ending_join_royal_house_effect = {
	if = {
		limit = {
			exists = var:ancestral_dynasty_founder
		}
		house = {
			set_variable = {
				name = ancestral_dynasty_finished #通用前朝传说	
				value = yes
			}
		}
		trigger_event = house_customizer.0021
	}
}


legend_start_join_royal_house_effect = {
	if = { 
		limit = { scope:peiguo_han_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1800859 }
		character:1800859 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1800859
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:sishui_cao_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:sishui_cao_0019 }
		character:sishui_cao_0019 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:sishui_cao_0019
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:house_zhuojun_liu_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1800056 }
		character:1800056 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1800056
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:house_fuchun_sun_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1407867 }
		character:1407867 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1407867
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:henei_sima_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:henei_sima_018 }
		character:henei_sima_018 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:henei_sima_018
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:house_pengcheng_suiyu_liu_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1800915 }
		character:1800915 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1800915
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:nanliang_xiao_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1402410 }
		character:1402410 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1402410
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:lanling_xiao_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1402537 }
		character:1402537 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1402537
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:yingchuan_chen_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1406821 }
		character:1406821 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1406821
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:dynn_Tuoba = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1415014 }
		character:1415014 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1415014
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:hongnong_yang_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:247725 }
		character:247725 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:247725
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:longxi_li_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:longxi_li_0646 }
		character:longxi_li_0646 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:longxi_li_0646
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:taiyuan_wu_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:217704 }
		character:217704 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:217704
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:dynn_Chai1 = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:1401283 }
		character:1401283 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:1401283
					title = title:e_celestia
				}
			}
		}
	}
	if = { 
		limit = { scope:zhuojun_zhao_motto = yes }
		set_variable = { name = ancestral_dynasty_founder	value = character:217721 }
		character:217721 = { save_scope_as = hc_selection }
		send_interface_toast = {
			title = heroic_legend_seed_drop.t
			left_icon = root
			create_legend_seed = {	
				type = origin
				quality = famed
				chronicle = ancestral_dynasty
				chronicle_properties = {
					ancestor = character:217721
					title = title:e_celestia
				}
			}
		}
	}

}